<div class="container-fluid  h-100 card mb-2">

    <form [formGroup]="entryForm">
      <div class="card-body">
        <h5 class="card-title">Transaction Summary</h5>
      <div class="form-row">
        <div class="form-group col-md-4">
          <select class="form-control dropdown-toggle" formControlName="type">
            <option value=null selected>--Select Entry For--</option>
              <option value="1">User</option>
              <option value="2">Vehicle</option>
              <option value="3">Account</option>
          </select>
      </div>

          <div class="form-group col-md-4">
              <input type="text" formControlName="title" placeholder="Entry Title" class="form-control">
          </div>
          <div class="form-group col-md-4">
            <input type="text" formControlName="entryDate" placeholder="Entry Date" class="form-control">
        </div>
        <div class="form-group col-md-4">
          <input type="number" formControlName="marketPrice" (ngModelChange)="calculateTotal()" placeholder="Market price" class="form-control">
        </div>
        <div class="form-group col-md-4">
          <input type="number"  formControlName="discountAmount" (ngModelChange)="calculateTotal()" placeholder="Discount Amount" class="form-control">
        </div>
        <div class="form-group col-md-4">
          <input type="text" readonly formControlName="netAmount" placeholder="Total Amount" class="form-control">
        </div>
        <div class="form-group col-md-4">
          <input type="text" readonly formControlName="dueAmount" placeholder="Due Amount" class="form-control">
        </div>
        <div class="form-group col-md-4">
          <input type="text" formControlName="remarks" placeholder="Entry Remarks" class="form-control">
        </div>
      </div>
      <h5 class="card-title">Journal Entry<span class="ml-4"><button type="button" class="btn btn-primary btn-sm"><i class="fa fa-plus-circle" aria-hidden="true" (click)="addJournalEntry()"></i></button></span></h5>
      <div class="form-row" formArrayName="journalEntry">
        <table class="table table-hover border">
          <thead class="thead-dark">
            <th>S.N</th>
            <th>Particular</th>
            <th>Entry Date</th>
            <th>Debit(Rs)</th>
            <th>Credit(Rs)</th>
            <th>Remark</th>
            <th>Action</th>
          </thead>
          <tbody>
              <tr *ngFor="let doc of journalEntries().controls; let i=index" [formGroupName]="i">
                <td><button type="button" class="mt-2 btn btn-sm disabled btn-outline-primary">{{i+1}}</button></td>
                <td>
                  <input type="text"  formControlName="title" placeholder="Particular" class="form-control w-90 mt-1">
                </td>
                <td>
                  <input type="text"  formControlName="entryDate" placeholder="Entry Date" class="form-control w-90 mt-1">
                </td>
                <td>
                  <input type="number"  formControlName="debitAmount" (ngModelChange)="calculateTotal()" placeholder="Debit Amount" class="form-control w-90 mt-1">
                </td>
                <td>
                  <input type="number"  formControlName="creditAmount" (ngModelChange)="calculateTotal()" placeholder="Credit Amount" class="form-control w-90 mt-1">
                </td>
                <td>
                  <input type="text"  formControlName="remarks" placeholder="Remarks" class="form-control w-90 mt-1">
                </td>
                <td>
                   <button *ngIf="journalEntries().controls.length>1" type="button" class="btn btn-sm btn-danger w-b mt-1 ml-2"
                    (click)="removeJournalEntry(i)" ><em class="fa fa-minus">
                  </em></button>
                </td>

              </tr>

          </tbody>
          <tfoot>
            <tr>
              <td colspan="3"><strong class="pull-right">Total Amount(Rs.)</strong></td>
              <td><strong class="pull-right">{{debitPaidAmount}}</strong></td>
              <td><strong class="pull-right">{{creditPaidAmount}}</strong></td>
              <td colspan="2"></td>
            </tr>
            <tr *ngIf="errorMsg">
              <td colspan="7"><strong class="text-danger" >{{errorMsg}}</strong></td>
            </tr>
            <tr *ngIf="balanceErrorMsg">
              <td colspan="7"><strong class="text-danger" >{{balanceErrorMsg}}</strong></td>
            </tr>
          </tfoot>

        </table>

      </div>
      <div class="form-row">
        <button type="submit" [disabled]="(!entryForm.valid || errorMsg || balanceErrorMsg)" class="btn btn-primary">Submit</button>
      </div>
    </div>
    </form>

</div>

